<?xml version="1.0" encoding="utf-8" ?>
<UserControl
    x:Class="FinanceUi.WinUi.Feature.BoardsManagement.BoardsList.BoardsListControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:board="using:FinanceUi.Core.Dtos.Board"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:FinanceUi.WinUi.Feature.BoardsManagement.BoardsList"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="using:CommunityToolkit.WinUI.Controls"
    d:DataContext="{d:DesignInstance local:BoardsListViewModel}"
    mc:Ignorable="d"
    DataContextChanged="UserControl_DataContextChanged">

    <ListView SelectionMode="None" ItemsSource="{Binding Boards}">
        <ListView.ItemTemplate>
            <DataTemplate x:DataType="board:BoardDto">
                <Grid
                    Margin="0 4"
                    CornerRadius="8"
                    Padding="16"
                    BorderThickness="1"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Spacing="12">
                        <TextBlock Text="{x:Bind Title}" Style="{StaticResource SubtitleTextBlockStyle}" />

                        <StackPanel Orientation="Horizontal" Grid.Row="1" Spacing="4">
                            <TextBlock Text="Накоплено:" Style="{StaticResource BodyTextBlockStyle}"/>
                            <TextBlock Text="{x:Bind PaidTotalGoal}" Style="{StaticResource BodyTextBlockStyle}"/>
                            <TextBlock Text="из" Style="{StaticResource BodyTextBlockStyle}"/>
                            <TextBlock Text="{x:Bind TotalGoal}" Style="{StaticResource BodyTextBlockStyle}"/>
                        </StackPanel>
                    </StackPanel>

                    <SplitButton Content="Выбрать" Grid.Column="1">
                        <SplitButton.Flyout>
                            <MenuFlyout>
                                <MenuFlyoutItem x:Name="EditButton" Text="Редактировать" Click="EditButton_Click" Icon="Edit" Tag="{x:Bind Id}"/>
                                <MenuFlyoutItem Text="Удалить" Icon="Delete"/>
                            </MenuFlyout>
                        </SplitButton.Flyout>
                    </SplitButton>
                </Grid>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>


</UserControl>
